<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2008 Financial Crisis</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Font Awesome for play/pause icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- D3.js and TopoJSON for map visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <!-- Custom styles for unemployment map -->
    <link rel="stylesheet" href="css/unemployment-map.css">
</head>
<body>
    <div class="container">
        <div class="section" id="section1" style="position: relative; width: 100vw; height: 100vh; overflow: hidden;">
            <div id="stochastic-animation" style="position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none;"></div>
            <div class="welcome-content" style="position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; color: #fff; text-align: center;">
                <h1 style="font-size: 4vw; font-weight: bold; margin-bottom: 2vh;">What happened in 2008?</h1>
                <p style="font-size: 2vw;">Scroll down to dive into the data and understand the impact of the financial crisis on the world</p>
            </div>
        </div>
        <div class="section" id="section2">
            <div class="mortgage-grid">
                <h2 class="mortgage-title">US Mortgage Delinquency Rate by State (90+ days)</h2>
                <div class="mortgage-map-area">
                    <div id="mortgage-map-container"></div>
                    <div id="mortgage-map-legend-container"></div>
                </div>
                <div class="mortgage-timeseries-area">
                    <div id="mortgage-timeseries"></div>
                    <div id="mortgage-dropdowns">
                        <label for="y1-select" style="color: #fff; margin-right: 10px;">Left Axis:</label>
                        <select id="y1-select"></select>
                        <label for="y2-select" style="color: #fff; margin: 0 10px 0 30px;">Right Axis:</label>
                        <select id="y2-select"></select>
                    </div>
                </div>
                <div class="mortgage-slider-area">
                    <div id="mortgage-controls-container">
                        <div id="mortgage-slider-play-row">
                            <button id="mortgage-play-button">
                                <i class="fas fa-play"></i>
                            </button>
                            <div id="mortgage-slider-container">
                                <div id="mortgage-slider-wrapper">
                                    <input type="range" id="mortgage-slider">
                                </div>
                            </div>
                            <div id="mortgage-date-display"></div>
                        </div>
                    </div>
                </div>
            </div>
            <link rel="stylesheet" href="css/us_map.css">
            <script src="https://d3js.org/d3.v7.min.js"></script>
            <script src="https://unpkg.com/topojson-client@3"></script>
            <script src="js/us_map.js"></script>
        </div>
        
        <div class="section" id="section3">
            <h2>Global Unemployment Impact</h2>
            <div id="unemployment-map-container">
                <div id="unemployment-tooltip"></div>
                <div class="unemployment-legend">
                    <div class="unemployment-legend-title">Unemployment Rate (%)</div>
                    <div class="unemployment-legend-scale"></div>
                    <div class="unemployment-legend-labels">
                        <span>0%</span>
                        <span>7.5%</span>
                        <span>15%+</span>
                    </div>
                </div>
                <div id="unemployment-controls">
                    <div class="data-switch">
                        <label class="switch">
                            <input type="checkbox" id="data-type-toggle">
                            <span class="slider round"></span>
                        </label>
                        <span class="switch-label">Show GDP Growth</span>
                    </div>
                    <button id="unemployment-play-button"><i class="fas fa-play"></i></button>
                    <span id="unemployment-year-display">2000</span>
                    <input type="range" id="unemployment-year-slider" min="2000" max="2023" value="2000">
                </div>
            </div>
        </div>
    
        <div class="section" id="bank-failures-map">
            <h2>Global Bank Failures Map</h2>
            <div id="map-container">
                <div id="bankMap"></div>
                <input type="range" id="monthSlider" min="0" max="N" step="1">
                <!-- Overlay UI -->
                <div id="mapOverlay">
                    <div id="currentDate">Year: —</div>
                    <div id="totalAmount">Total: —</div>
                    <button id="playButton">▶ Play</button>
                </div>
            </div>
            <link rel="stylesheet" href="css/bank_map.css">
            <script src="js/bank_map.js"></script>
        </div>
        
        <div class="section" id="sectionstockmarket">
            <h2>The Stock Market Shock </h2>
            <div class="double-image-container">
                <img src="src/Images/stockmarket.png" alt="stock_market" class="double-section-image">
                <img src="src/Images/barchartloss.png" alt="loss" class="double-section-image">
            </div>
            <p>These two visualizations highlight the global financial impact of the 2008 crisis through the lens of market performance and institutional losses. The first one is a <strong>line chart</strong> showing the normalized stock indexes of major economies between 2006 and 2009, revealing the timing and intensity of the global shock. The second one is a <strong>bar chart</strong> showing the total writedowns by financial institutions per country, to better understand where the losses were concentrated.</p>
            <p>Features : The user will be able to hover over the line chart to compare index values across countries on specific dates. On the bar chart, users will be able to filter or highlight countries to compare levels of exposure. Together, they give a clear picture of both public market reaction and institutional damage.</p>
            <p>Here we will use <strong>D3</strong> to plot the chart as it can easily handle multiple time series. Data will be loaded from a <strong>CSV</strong> file (Lecture 4), and interactions such as tooltip, highlighting and filters will be implemented using <strong>D3</strong> (Lecture 5).</p>
        </div>
        <div class="section" id="section_word_cloud">
            <h2>Public Anxiety: Tracking Fear Through Search Trends</h2>
            
            <!-- Container for the word cloud -->
            <div id="word-cloud-container" class="word-cloud"></div>
            
            <!-- Container for the slider and controls -->
            <div class="wc-controls-container">
                <div class="wc-legend">
                    <div style="display: flex; align-items: center; gap: 5px; color: #fff;">
                        <span style="color: #e41a1c">■</span> Financial Crisis Related
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px; color: #fff;">
                        <span style="color: #377eb8">■</span> Other Terms
                    </div>
                </div>
                <div class="wc-slider-play-row">
                    <button id="wc-play-button" class="wc-play-button">
                        <i class="fas fa-play"></i>
                    </button>
                    <div id="wc-slider-container" class="wc-slider-container">
                        <div class="wc-slider-wrapper">
                            <input type="range" class="wc-slider">
                        </div>
                    </div>
                </div>
                <div class="wc-date-display"></div>
            </div>
            
            <!-- Load Font Awesome -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
            <!-- Load CSS -->
            <link rel="stylesheet" href="css/word_cloud.css">
            
            <!-- Load D3.js and the word cloud library -->
            <script src="https://d3js.org/d3.v7.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/d3-cloud@1.2.5/build/d3.layout.cloud.min.js"></script>
            <script src="js/word_cloud.js"></script>
        </div> 
    </div>
    

    <div class="navigation">
        <div class="nav-dot active" data-section="0"></div>
        <div class="nav-dot" data-section="1"></div>
        <div class="nav-dot" data-section="2"></div>
        <div class="nav-dot" data-section="3"></div>
        <div class="nav-dot" data-section="4"></div>
        <div class="nav-dot" data-section="5"></div>
    </div>

    <!-- Load D3.js first -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-cloud@1.2.5/build/d3.layout.cloud.min.js"></script>
    <script src="js/scrollable_container.js"></script>
    <!-- Load welcome_stochastic.js after D3.js -->
    <script src="js/welcome_stochastic.js"></script>
    <!-- Custom script for unemployment map -->
    <script src="js/unemployment-map.js"></script>
</body>
</html>